{
  "version": 3,
  "sources": ["../../../src/components/avatar.tsx"],
  "sourcesContent": ["'use client';\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { Avatar as AvatarPrimitive } from 'radix-ui';\n\nimport { avatarPropDefs } from './avatar.props.js';\nimport { extractProps } from '../helpers/extract-props.js';\nimport { getSubtree } from '../helpers/get-subtree.js';\nimport { marginPropDefs } from '../props/margin.props.js';\n\nimport type { MarginProps } from '../props/margin.props.js';\nimport type { ComponentPropsWithout, RemovedProps } from '../helpers/component-props.js';\nimport type { GetPropDefTypes } from '../props/prop-def.js';\n\ninterface AvatarProps extends MarginProps, AvatarImplProps {}\nconst Avatar = React.forwardRef<AvatarImplElement, AvatarProps>((props, forwardedRef) => {\n  const { asChild, children, className, style, color, radius, ...imageProps } = extractProps(\n    props,\n    avatarPropDefs,\n    marginPropDefs\n  );\n\n  return (\n    // TODO as a rule, should we rather spread the props on root?\n    <AvatarPrimitive.Root\n      data-accent-color={color}\n      data-radius={radius}\n      className={classNames('rt-reset', 'rt-AvatarRoot', className)}\n      style={style}\n      asChild={asChild}\n    >\n      {getSubtree({ asChild, children }, <AvatarImpl ref={forwardedRef} {...imageProps} />)}\n    </AvatarPrimitive.Root>\n  );\n});\nAvatar.displayName = 'Avatar';\n\ntype AvatarImplElement = React.ElementRef<typeof AvatarPrimitive.Image>;\ntype AvatarOwnProps = GetPropDefTypes<typeof avatarPropDefs>;\n\ninterface AvatarImplProps\n  extends ComponentPropsWithout<typeof AvatarPrimitive.Image, RemovedProps>,\n    AvatarOwnProps {\n  // TODO: See if we can automate making prop defs with `required: true` non nullable\n  fallback: NonNullable<AvatarOwnProps['fallback']>;\n}\n\nconst AvatarImpl = React.forwardRef<AvatarImplElement, AvatarImplProps>(\n  ({ fallback, ...imageProps }, forwardedRef) => {\n    const [status, setStatus] = React.useState<'idle' | 'loading' | 'loaded' | 'error'>('idle');\n    return (\n      <>\n        {status === 'idle' || status === 'loading' ? <span className=\"rt-AvatarFallback\" /> : null}\n\n        {status === 'error' ? (\n          <AvatarPrimitive.Fallback\n            className={classNames('rt-AvatarFallback', {\n              'rt-one-letter': typeof fallback === 'string' && fallback.length === 1,\n              'rt-two-letters': typeof fallback === 'string' && fallback.length === 2,\n            })}\n            delayMs={0}\n          >\n            {fallback}\n          </AvatarPrimitive.Fallback>\n        ) : null}\n\n        <AvatarPrimitive.Image\n          ref={forwardedRef}\n          className=\"rt-AvatarImage\"\n          {...imageProps}\n          onLoadingStatusChange={(status) => {\n            imageProps.onLoadingStatusChange?.(status);\n            setStatus(status);\n          }}\n        />\n      </>\n    );\n  }\n);\n\nAvatarImpl.displayName = 'AvatarImpl';\n\nexport { Avatar };\nexport type { AvatarProps };\n"],
  "mappings": "aAEA,UAAYA,MAAW,QACvB,OAAOC,MAAgB,aACvB,OAAS,UAAUC,MAAuB,WAE1C,OAAS,kBAAAC,MAAsB,oBAC/B,OAAS,gBAAAC,MAAoB,8BAC7B,OAAS,cAAAC,MAAkB,4BAC3B,OAAS,kBAAAC,MAAsB,2BAO/B,MAAMC,EAASP,EAAM,WAA2C,CAACQ,EAAOC,IAAiB,CACvF,KAAM,CAAE,QAAAC,EAAS,SAAAC,EAAU,UAAAC,EAAW,MAAAC,EAAO,MAAAC,EAAO,OAAAC,EAAQ,GAAGC,CAAW,EAAIZ,EAC5EI,EACAL,EACAG,CACF,EAEA,OAEEN,EAAA,cAACE,EAAgB,KAAhB,CACC,oBAAmBY,EACnB,cAAaC,EACb,UAAWd,EAAW,WAAY,gBAAiBW,CAAS,EAC5D,MAAOC,EACP,QAASH,GAERL,EAAW,CAAE,QAAAK,EAAS,SAAAC,CAAS,EAAGX,EAAA,cAACiB,EAAA,CAAW,IAAKR,EAAe,GAAGO,EAAY,CAAE,CACtF,CAEJ,CAAC,EACDT,EAAO,YAAc,SAYrB,MAAMU,EAAajB,EAAM,WACvB,CAAC,CAAE,SAAAkB,EAAU,GAAGF,CAAW,EAAGP,IAAiB,CAC7C,KAAM,CAACU,EAAQC,CAAS,EAAIpB,EAAM,SAAkD,MAAM,EAC1F,OACEA,EAAA,cAAAA,EAAA,cACGmB,IAAW,QAAUA,IAAW,UAAYnB,EAAA,cAAC,QAAK,UAAU,oBAAoB,EAAK,KAErFmB,IAAW,QACVnB,EAAA,cAACE,EAAgB,SAAhB,CACC,UAAWD,EAAW,oBAAqB,CACzC,gBAAiB,OAAOiB,GAAa,UAAYA,EAAS,SAAW,EACrE,iBAAkB,OAAOA,GAAa,UAAYA,EAAS,SAAW,CACxE,CAAC,EACD,QAAS,GAERA,CACH,EACE,KAEJlB,EAAA,cAACE,EAAgB,MAAhB,CACC,IAAKO,EACL,UAAU,iBACT,GAAGO,EACJ,sBAAwBG,GAAW,CACjCH,EAAW,wBAAwBG,CAAM,EACzCC,EAAUD,CAAM,CAClB,EACF,CACF,CAEJ,CACF,EAEAF,EAAW,YAAc",
  "names": ["React", "classNames", "AvatarPrimitive", "avatarPropDefs", "extractProps", "getSubtree", "marginPropDefs", "Avatar", "props", "forwardedRef", "asChild", "children", "className", "style", "color", "radius", "imageProps", "AvatarImpl", "fallback", "status", "setStatus"]
}
